# 📌 사진 구도 피드백 & 나노 바나나 보정 서비스 (MVP)

## 1. 사용자 스토리
- **사용자 유형**: 사진 입문자, 취미 사진가, SNS 업로더  
- **니즈**: 내가 찍은 사진이 좋은 구도인지 알고 싶다 / 전문가가 말해주는 것처럼 교정 방향을 듣고 싶다 / 같은 구도를 더 나은 느낌으로 재현된 샘플 이미지를 보고 싶다.  
- **행동 플로우**:  
  1. 사진 업로드 + 장르 선택(인물, 풍경, 제품)  
  2. 분석 결과(점수/피드백/가이드 문구) 확인  
  3. AI 보정 시뮬레이션(나노 바나나 이미지) 생성  
  4. 결과 비교(전/후 이미지)  

---

## 2. 핵심 기능

### (A) 사진 구도 분석 API (/analyze-composition)
- 입력: 이미지 + 장르 옵션
- 처리:  
  - OpenCV 등으로 구도 요소 분석  
    - 룰 오브 서즈 점수  
    - 수평선 기울기  
    - 헤드룸/룩룸 비율  
    - 노출(히스토그램 클리핑)  
    - 선명도(라플라시안 분산)  
  - 장르별 가중치 반영 → 총점 산출  
- 출력:  
  - 총점(100점 만점)  
  - 규칙별 진단 결과 + 피드백 메시지  
  - 사용자용 “구도 코치 가이드”(쉬운 설명)  
  - 나노 바나나용 전문 프롬프트 (보정 지시 포함)  

### (B) 나노 바나나 API 연동 (/generate-nanobanana)
- 입력: 원본 이미지 + 생성된 프롬프트 + 옵션(스타일, 크기 등)  
- 처리: Google Gemini API (모델명: `gemini-2.5-flash-image-preview`) 호출  
- 출력: 보정된 이미지 (다운로드 가능)  

### (C) 프론트엔드 (React)
- 기능:  
  - 파일 업로드 & 장르 선택 UI  
  - 분석 결과 시각화 (3×3 그리드, 수평선 라인, 제안 크롭 표시)  
  - 구도 점수 카드 + 피드백 리스트  
  - 전문가용 프롬프트 미리보기 (수정 가능)  
  - “구도 코치” 설명 패널 (초보자용 쉬운 가이드)  
  - 나노 바나나 생성 결과 보기 (전/후 비교 슬라이더)  

---

## 3. 부가 기능 (MVP 범위에 포함할지 선택)
- **로그 저장**: 사용자의 업로드·분석·생성 기록 보관  
- **세션 캐시**: 최근 3장 정도 결과 비교 가능  
- **템플릿화**: 장르별 기본 프롬프트 템플릿 제공 (수정 가능)  

---

## 4. 기술 스택
- **백엔드**: Python(FastAPI) + OpenCV + google-genai SDK  
- **프론트엔드**: React + Tailwind + Axios  
- **스토리지**: 로컬 디스크(MVP), 이후 S3/GCS 확장 가능  
- **배포**: Docker + Cloud Run(or EC2)  

---

## 5. 비기능 요건
- **응답 속도**: 구도 분석 < 2초, 이미지 생성 < 10초 (API 호출 한계 고려)  
- **확장성**: 장르/규칙 추가 가능하도록 모듈화  
- **안정성**: 에러 핸들링 (이미지 인식 실패, API 응답 지연 등)  
- **윤리/안전**: 초상권/저작권 안내, 결과 이미지 워터마크(“AI 보정”) 표기  

---

## 6. 개발 로드맵 (2주 기준)
- **주 1**  
  - API-1: 구도 분석 로직 구현 (룰 오브 서즈, 수평, 노출, 선명도)  
  - 프롬프트 빌더 (인물/풍경/제품 템플릿)  
  - React 업로드/분석 결과 뷰  

- **주 2**  
  - API-2: 나노 바나나 연동  
  - 프롬프트 수정 → 생성 → 결과 다운로드  
  - 구도 코치 설명 패널 연결  
  - 기본 비교 뷰(전/후)  
